(this["webpackJsonpmy-vital-frontend"]=this["webpackJsonpmy-vital-frontend"]||[]).push([[0],{42:function(e,t,a){e.exports=a(74)},49:function(e,t,a){},50:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(15),l=a.n(s),o=a(20),i=a(36),c=(a(49),a(41)),u=a(9),m=a(10),h=a(14),d=a(11),p=a(13),f=a(16),g=a(25),E=(a(50),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){return a.setState({show:!1})},a.state={show:!0},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){e.setState({show:!1})}),5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var e=this.props,t=e.variant,a=e.heading,n=e.message;return r.a.createElement(g.a,{dismissible:!0,show:this.state.show,variant:t,onClose:this.handleClose},r.a.createElement("div",{className:"container"},r.a.createElement(g.a.Heading,null,a),r.a.createElement("p",{className:"alert-body"},n)))}}]),t}(r.a.Component)),b=a(38),v=function(e){var t=e.user,a=e.component,n=e.render,s=Object(b.a)(e,["user","component","render"]);return t&&n?r.a.createElement(f.b,Object.assign({},s,{render:n})):r.a.createElement(f.b,Object.assign({},s,{render:function(e){return t?r.a.createElement(a,e):r.a.createElement(f.a,{to:"/"})}}))},w=a(18),O="https://pure-lake-78722.herokuapp.com",y="http://localhost:3001",j="localhost"===window.location.hostname?y:O,C=a(19),S=a.n(C),F=function(e){return S()({method:"POST",url:j+"/registrations",data:{user:{name:e.name,email:e.email,password:e.password,password_confirmation:e.passwordConfirmation}}})},k=function(e){return console.log("login"),S()({url:j+"/sessions",method:"POST",data:{user:{email:e.email,password:e.password}}})},U={registrationSuccess:"Succesfully registered! You've been signed in as well.",registrationFailure:"Registration failed. Email may be taked, or passwords don't match.",signInSuccess:"Welcome!",signInFailure:"Failed to sign in. Check your email and password and try again.",signOutSuccess:"Come back soon!",changePasswordSuccess:"Password changed successfully!",changePasswordFailure:"Failed to change passwords. Check your old password and try again."},N=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).handleChange=function(t){return e.setState(Object(w.a)({},t.target.name,t.target.value))},e.onSignUp=function(t){t.preventDefault();var a=e.props,n=a.alert,r=a.history,s=a.setUser;F(e.state).then((function(){return k(e.state)})).then((function(e){return s(e.data.user)})).then((function(){return n(U.registrationSuccess,"success")})).then((function(){return r.push("/profile")})).catch((function(t){console.error(t),e.setState({email:"",password:"",passwordConfirmation:""}),n(U.registrationFailure,"danger")}))},e.state={name:"",email:"",password:"",passwordConfirmation:""},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.password,s=e.passwordConfirmation;return r.a.createElement("form",{className:"auth-form",onSubmit:this.onSignUp},r.a.createElement("h3",null,"Register"),r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{required:!0,name:"name",value:t,type:"name",placeholder:"Name",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{required:!0,name:"email",value:a,type:"email",placeholder:"Email",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{required:!0,name:"password",value:n,type:"password",placeholder:"Password",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"passwordConfirmation"},"Confirm Password"),r.a.createElement("input",{required:!0,name:"passwordConfirmation",value:s,type:"password",placeholder:"Confirm Password",onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Register"))}}]),t}(n.Component),I=Object(f.f)(N),P=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).handleChange=function(t){return e.setState(Object(w.a)({},t.target.name,t.target.value))},e.onSignIn=function(t){t.preventDefault();var a=e.props,n=a.alert,r=a.history,s=a.setUser;k(e.state).then((function(e){return s(e.data.user)})).then((function(){return n(U.signInSuccess,"success")})).then((function(){return r.push("/profile")})).catch((function(t){console.error(t),e.setState({email:"",password:""}),n(U.signInFailure,"danger")}))},e.state={email:"",password:""},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",null,r.a.createElement("form",{className:"auth-form",onSubmit:this.onSignIn},r.a.createElement("h3",null,"Login"),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{required:!0,type:"email",name:"email",value:t,placeholder:"Email",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{required:!0,name:"password",value:a,type:"password",placeholder:"Password",onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Login")))}}]),t}(n.Component),L=Object(f.f)(P),T=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.alert,a=e.history,n=e.clearUser;e.user;S()({url:j+"/logout",method:"DELETE"}).finally((function(){return t(U.signOutSuccess,"success")})).finally((function(){return a.push("/sessions")})).finally((function(){return n()}))}},{key:"render",value:function(){return""}}]),t}(n.Component),q=Object(f.f)(T),M=a(7),R=(a(71),r.a.createElement(r.a.Fragment,null,r.a.createElement(M.b,{to:"/logout"},"Logout"))),D=r.a.createElement(r.a.Fragment,null,r.a.createElement(M.b,{to:"/registrations"},"Register"),r.a.createElement(M.b,{to:"/sessions"},"Login")),A=r.a.createElement(r.a.Fragment,null,r.a.createElement(M.b,{to:"/"},"Home")),_=function(e){var t=e.user;return r.a.createElement("header",{className:"main-header"},r.a.createElement("h1",null,"Vital Frontend"),r.a.createElement("nav",null,t&&r.a.createElement("span",null,"Welcome, ",t.name),t?R:D,A))};a(72);var B=function(e){return r.a.createElement("div",{className:"profile"},r.a.createElement("p",null,"NAME: ",e.user.name),r.a.createElement("p",null,"EMAIL: ",e.user.email),r.a.createElement("p",null,"LAST LOGIN: ",e.user.last_login),r.a.createElement("p",null,"NUMBER OF LOGINS: ",e.user.sessions_count))},W=(a(73),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).setUser=function(t){return e.setState({user:t})},e.clearUser=function(){return e.setState({user:null})},e.alert=function(t,a){e.setState({alerts:[].concat(Object(c.a)(e.state.alerts),[{message:t,type:a}])})},e.state={user:null,alerts:[]},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.alerts,n=t.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{user:n}),a.map((function(e,t){return r.a.createElement(E,{key:t,heading:e.heading,variant:e.variant,message:e.message})})),r.a.createElement("main",{className:"container"},r.a.createElement(f.b,{path:"/registrations",render:function(){return r.a.createElement(I,{alert:e.alert,setUser:e.setUser})}}),r.a.createElement(f.b,{path:"/sessions",render:function(){return r.a.createElement(L,{alert:e.alert,setUser:e.setUser})}}),r.a.createElement(v,{user:n,path:"/logout",render:function(){return r.a.createElement(q,{alert:e.alert,clearUser:e.clearUser,user:n})}}),r.a.createElement(v,{user:n,path:"/profile",render:function(){return r.a.createElement(B,{alert:e.alert,user:n})}})))}}]),t}(n.Component)),x={position:o.b.BOTTOM_CENTER,timeout:5e3,offset:"30px",transition:o.c.SCALE},G=r.a.createElement(M.a,null,r.a.createElement(o.a,Object.assign({template:i.a},x),r.a.createElement(W,null)));l.a.render(G,document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.4124d653.chunk.js.map